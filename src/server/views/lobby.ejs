<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%= title %></title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-gray-100 min-h-screen">
    <!-- Navbar -->
    <div class="flex justify-between items-center bg-gray-800 px-6 py-4">
        <div class="flex items-center space-x-4">
            <h1 class="text-2xl font-bold text-yellow-400"><%= user ? user.username : 'User' %></h1>
        </div>
        <div class="flex space-x-4">
            <% if (user) { %>
                <button class="bg-gray-700 px-4 py-2 rounded text-white">
                    <a href="/lobby">Lobby</a>
                </button>
                <button class="bg-red-500 px-4 py-2 rounded">
                    <a href="/auth/logout">Logout</a>
                </button>
            <% } else { %>
                <button class="bg-blue-500 px-4 py-2 rounded">
                    <a href="/auth/login">Login</a>
                </button>
                <button class="bg-green-500 px-4 py-2 rounded">
                    <a href="/auth/register">Sign Up</a>
                </button>
            <% } %>
        </div>
    </div>
    <!-- Welcome Section -->
    <div class="p-8 text-center">
        <h2 class="text-4xl font-bold text-green-400 mb-4">Welcome to UNO Game</h2>
        <p class="text-lg text-gray-300 mb-4">
            Please select your game or start a new game with your team member.
        </p>
    </div>
<!-- Split Layout -->
<div class="grid grid-cols-3 gap-6 px-8">
    <!-- Left Section -->
     
    <div class="col-span-2">
        <div class="flex space-x-4 mb-8">
            <form method="post" action="/games/create">
                <button class="bg-gray-300 text-black px-8 py-4 rounded w-40 text-lg font-bold">
                    New Game
                </button>
            </form>
        </div>
    <!-- </div> -->
    

        <table class="w-full">
            <tbody id="available-games-list">
            <% locals.availableGames !== undefined && availableGames.forEach((room) => { %>
                <tr id="game-row-<%= room.id %>">
                    <td class="border-b border-black py-1">Game <%= room.id %></td>
                    <td class="border-b border-black py-1">(<%= room.players %> / <%= room.player_count %>)</td>
                    <td class="text-center border-b border-black py-1">
                        <form action="/games/join/<%= room.id %>" method="post">
                            <button class="bg-black text-white rounded-sm px-2 border border-black">Join</button>
                        </form>
                    </td>
                </tr>
            <% }); %>
            </tbody>
        </table>
    </div>

    <template id="game-row-template">
        <tr>
            <td class="border-b border-black py-1"></td>
            <td class="border-b border-black py-1"></td>
            <td class="text-center border-b border-black py-1">
                <form action="/join/X" method="post">
                    <button class="bg-black text-white rounded-sm px-2 border border-black">Join</button>
                </form>
            </td>
        </tr>
    </template>

    <%- include('./partials/chat.ejs', { roomId: roomId }) %>
    <%- include('./partials/footer.ejs') %>
</div>

<script src="/js/lobby.js"></script>
</body>
</html>
